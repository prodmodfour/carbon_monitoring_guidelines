---
layout: default
title: Outcome
---

<main style="margin:2rem 1rem;max-width:48rem">
  <a href="{{ '/' | relative_url }}?sel=" id="back">&larr; Change selection</a>
  <h1 style="margin:1rem 0">{{ page.title }}</h1>

  {%- comment -%}
  Render ALL outcome sections; JS will show only the matching one by `data-key`.
  Content comes from _data/outcomes.yml and is Markdown-friendly via `markdownify`.
  {%- endcomment -%}
  {%- assign outcomes = site.data.outcomes -%}
  {%- for o in outcomes -%}
    <section data-key="{{ o.key | escape }}" hidden>
      <h2>{{ o.title }}</h2>
      {{ o.body | markdownify }}
    </section>
  {%- endfor -%}

  <p id="not-found" hidden>That combination doesn’t have custom content yet.</p>
</main>

<script>
  const url = new URL(location.href);
  const selFromQuery = url.searchParams.get("sel") || "";
  const selFromHash = decodeURIComponent(location.hash.replace(/^#/, "")) || "";
  const key = selFromQuery || selFromHash; // prefer query param

  // Update page title and “Back” link to preserve state
  if (key) document.title = `${document.title} · ${key}`;
  const back = document.getElementById('back');
  const backUrl = new URL({{ '/' | relative_url | jsonify }}, location.origin);
  backUrl.searchParams.set("sel", key);
  back.href = backUrl.pathname + backUrl.search;

  // Reveal matching section, or show a friendly fallback
  const sections = [...document.querySelectorAll("section[data-key]")];
  const match = sections.find(s => s.dataset.key === key);
  (match || document.querySelector('section[data-key=""]'))?.removeAttribute('hidden');
  if (!match && key && !document.querySelector('section[data-key=""]')) {
    document.getElementById('not-found').hidden = false;
  }
</script>

<noscript>
  <!-- No-JS fallback: everything shows. You can add CSS to collapse details if desired. -->
  <style>[hidden]{display:unset !important}</style>
</noscript>
